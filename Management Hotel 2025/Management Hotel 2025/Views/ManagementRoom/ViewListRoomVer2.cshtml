@using Management_Hotel_2025.ViewModel
@{
    Layout = null;
}

@model Management_Hotel_2025.ViewModel.PaginatedResult<ViewRoomModel>

<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="utf-8" />
    <title>Danh sách phòng khách sạn Luxury</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="~/css/ViewListRoomCss.css" />
</head>
<body>
    <div class="lux-hotel-bg">
        <div class="lux-hotel-header">
            <h1>Danh sách phòng khách sạn</h1>
            <p>Trải nghiệm đẳng cấp với không gian sang trọng và dịch vụ tuyệt vời</p>
        </div>
        <div class="lux-room-filter">
            <form id="lux-filter-form" asp-action="ViewListRoomVer2" asp-controller="ManagementRoom" method="get" style="display: flex; gap: 32px; align-items: center;">
                <label>
                    Tầng:
                    <select name="Floor" id="filter-floor" onchange="this.form.submit()">
                        <option value="">Tất cả</option>
                        <option value="1" selected="@(ViewBag.Floor == 1 ? "selected" : null)">Tầng 1</option>
                        <option value="2" selected="@(ViewBag.Floor == 2 ? "selected" : null)">Tầng 2</option>
                        <option value="3" selected="@(ViewBag.Floor == 3 ? "selected" : null)">Tầng 3</option>
                        <option value="4" selected="@(ViewBag.Floor == 4 ? "selected" : null)">Tầng 4</option>
                        <option value="5" selected="@(ViewBag.Floor == 5 ? "selected" : null)">Tầng 5</option>
                        <option value="6" selected="@(ViewBag.Floor == 6 ? "selected" : null)">Tầng 6</option>
                        <option value="7" selected="@(ViewBag.Floor == 7 ? "selected" : null)">Tầng 7</option>
                        <option value="8" selected="@(ViewBag.Floor == 8 ? "selected" : null)">Tầng 8</option>
                    </select>
                </label>
                <label>
                    Giá từ:
                    <select name="PriceMin" id="filter-min-price" onchange="this.form.submit()">
                        <option value="">Giá Min</option>
                        <option value="1">500K</option>
                        <option value="2">800K</option>
                        <option value="3">1000K</option>
                    </select>

                    đến
                    <select name="PriceMax" id="filter-min-price" onchange="this.form.submit()">
                        <option value="">Giá Max</option>
                        <option value="1">3 Tr</option>
                        <option value="2">5 Tr</option>
                        <option value="3">10 Tr</option>
                    </select>
                </label>
                <label>
                    Số người/Phòng:
                    <select name="Person" id="filter-min-price" onchange="this.form.submit()">
                        <option value="">Phòng 1 Người</option>
                        <option value="2" selected="@(ViewBag.Person == 2 ? "selected" : null)">Phòng 2 Người</option>
                        <option value="3" selected="@(ViewBag.Person == 3 ? "selected" : null)">Phòng 3 Người</option>
                        <option value="4" selected="@(ViewBag.Person == 4 ? "selected" : null)">Phòng 4 Người</option>
                    </select>
                </label>
                <  <input type="hidden" name="PageCurrent" value="@ViewBag.PageCurrent" />
                <input type="hidden" name="NumerItemOfPage" value="@ViewBag.NumerItemOfPage" />
                <button type="button" onclick="luxResetFilter()">Đặt lại</button>
            </form>
        </div>
        <div class="lux-room-list">
            @foreach (var room in Model.Data)
            {
                <div class="lux-room-card"
                     onmouseover="luxuryCardHover(this)" onmouseout="luxuryCardOut(this)">
                    <div class="lux-room-img-wrapper tall-img">
                        <img src="@room.Image" alt="@room.Name" class="lux-room-img" />
                        <span class="lux-badge">LUXURY</span>
                    </div>
                    <div class="lux-room-info small-desc">
                        <h2>@room.Name</h2>
                        <p class="lux-room-desc">@room.Description</p>

                        <div class="lux-room-bottom">
                            <span class="lux-room-price">@room.Price</span>
                            <a asp-action="ViewDetailRoom"
                               asp-controller="ManagementRoom"
                               asp-route-idRoom="@room.IdRoom" class="lux-book-btn" target="_blank">
                                Xem chi tiết
                            </a>
                        </div>
                    </div>
                    <div class="lux-glow"></div>
                </div>
            }
        </div>
    </div>
    <div id="lux-modal" class="lux-modal">
        <div class="lux-modal-content">
            <span class="lux-modal-close" onclick="luxCloseModal()">&times;</span>
            <h2>Đặt phòng thành công!</h2>
            <p>Cảm ơn bạn đã chọn <span id="lux-modal-room"></span>.<br />Chúng tôi sẽ liên hệ với bạn sớm nhất.</p>
        </div>
    </div>
    <!-- PHÂN TRANG ĐÃ SỬA -->
    <div class="pagination">
        @if (@Model.CurrentPage > 1)
        {
            <a asp-action="ViewListRoomVer2"
               asp-controller="ManagementRoom"
               asp-route-PageCurrent="@(Model.CurrentPage - 1)"
               asp-route-NumerItemOfPage="10">
                &laquo; Prev
            </a>
        }
        @for (int i = 1; i <= @Model.TotalPages; i++)
        {
            if (i == @Model.CurrentPage)
            {
                <a class="active" href="#">@i</a>
            }
            else
            {
                <a asp-action="ViewListRoomVer2"
                   asp-controller="ManagementRoom"
                   asp-route-PageCurrent="@i"
                   asp-route-NumerItemOfPage="8">
                    @i
                </a>
            }
        }
        @if (@Model.CurrentPage < @Model.TotalPages)
        {
            <a asp-action="ViewListRoomVer2"
               asp-controller="ManagementRoom"
               asp-route-PageCurrent="@(Model.CurrentPage + 1)"
               asp-route-NumerItemOfPage="10">
                Next &raquo;
            </a>
        }
    </div>
    <script src="~/js/ViewListRoom.js"></script>
</body>
</html>